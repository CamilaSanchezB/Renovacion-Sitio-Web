

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> components/AnimacionMundo.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Global</h3><ul><li><a href="global.html#Modelo3DComponent">Modelo3DComponent</a></li><li><a href="global.html#ModeloInfo">ModeloInfo</a></li><li><a href="global.html#ModeloRender">ModeloRender</a></li><li><a href="global.html#SliderContent">SliderContent</a></li><li><a href="global.html#asignar">asignar</a></li><li><a href="global.html#calculateProgressWidth">calculateProgressWidth</a></li><li><a href="global.html#chequeoContrasena">chequeoContrasena</a></li><li><a href="global.html#chequeoUsuario">chequeoUsuario</a></li><li><a href="global.html#handleClick">handleClick</a></li><li><a href="global.html#legendTemplate">legendTemplate</a></li><li><a href="global.html#procesarCambio">procesarCambio</a></li><li><a href="global.html#setStylePerPosition">setStylePerPosition</a></li><li><a href="global.html#show">show</a></li><li><a href="global.html#showError">showError</a></li><li><a href="global.html#showSuccess">showSuccess</a></li></ul></div><div class="category"><h2>Components</h2><h3>Global</h3><ul><li><a href="global.html#AnimacionMundo">AnimacionMundo</a></li><li><a href="global.html#Arrow">Arrow</a></li><li><a href="global.html#Button">Button</a></li><li><a href="global.html#Card">Card</a></li><li><a href="global.html#CarouselTechnology">CarouselTechnology</a></li><li><a href="global.html#Counter">Counter</a></li><li><a href="global.html#DefaultCard">DefaultCard</a></li><li><a href="global.html#ElementCarouselApplications">ElementCarouselApplications</a></li><li><a href="global.html#ElementNewsDetail">ElementNewsDetail</a></li><li><a href="global.html#Flags">Flags</a></li><li><a href="global.html#Form">Form</a></li><li><a href="global.html#Input">Input</a></li><li><a href="global.html#LoginForm">LoginForm</a></li><li><a href="global.html#Logo">Logo</a></li><li><a href="global.html#ModalEditorContador">ModalEditorContador</a></li><li><a href="global.html#ModalEditorRegistro">ModalEditorRegistro</a></li><li><a href="global.html#ModalEditorRoadmap">ModalEditorRoadmap</a></li><li><a href="global.html#Modelo3D">Modelo3D</a></li><li><a href="global.html#Navbar">Navbar</a></li><li><a href="global.html#NavbarLink">NavbarLink</a></li><li><a href="global.html#NavbarNoticia">NavbarNoticia</a></li><li><a href="global.html#Noticia">Noticia</a></li><li><a href="global.html#Opciones">Opciones</a></li><li><a href="global.html#ProgressBar">ProgressBar</a></li><li><a href="global.html#Roadmap">Roadmap</a></li><li><a href="global.html#SelectArchivo">SelectArchivo</a></li><li><a href="global.html#Title">Title</a></li><li><a href="global.html#ToggleButton">ToggleButton</a></li><li><a href="global.html#Wave">Wave</a></li><li><a href="global.html#Year">Year</a></li></ul></div><div class="category"><h2>Functions</h2><h3>Global</h3><ul><li><a href="global.html#actualizarContrasena">actualizarContrasena</a></li><li><a href="global.html#actualizarNoticia">actualizarNoticia</a></li><li><a href="global.html#actualizarPermisos">actualizarPermisos</a></li><li><a href="global.html#actualizarUsuarios">actualizarUsuarios</a></li><li><a href="global.html#agregarAnioRoadmap">agregarAnioRoadmap</a></li><li><a href="global.html#autenticar">autenticar</a></li><li><a href="global.html#borrarEditor">borrarEditor</a></li><li><a href="global.html#borrarMultimedia">borrarMultimedia</a></li><li><a href="global.html#borrarNoticia">borrarNoticia</a></li><li><a href="global.html#crearNoticia">crearNoticia</a></li><li><a href="global.html#crearUsuario">crearUsuario</a></li><li><a href="global.html#editarAnioInicio">editarAnioInicio</a></li><li><a href="global.html#editarCantAnios">editarCantAnios</a></li><li><a href="global.html#editarCantidadContadores">editarCantidadContadores</a></li><li><a href="global.html#editarContenido">editarContenido</a></li><li><a href="global.html#editarContenidoContadores">editarContenidoContadores</a></li><li><a href="global.html#eliminarContador">eliminarContador</a></li><li><a href="global.html#encriptar">encriptar</a></li><li><a href="global.html#enviarMailContacto">enviarMailContacto</a></li><li><a href="global.html#fetchDataLatestNews">fetchDataLatestNews</a></li><li><a href="global.html#fetchDataMultimedia">fetchDataMultimedia</a></li><li><a href="global.html#fetchDataMultimediaWeb">fetchDataMultimediaWeb</a></li><li><a href="global.html#fetchDataNoticias">fetchDataNoticias</a></li><li><a href="global.html#fetchDataNoticiasWMultimedia">fetchDataNoticiasWMultimedia</a></li><li><a href="global.html#fetchMultimediaById">fetchMultimediaById</a></li><li><a href="global.html#fetchNoticiaById">fetchNoticiaById</a></li><li><a href="global.html#getAnioInicio">getAnioInicio</a></li><li><a href="global.html#getCantAnios">getCantAnios</a></li><li><a href="global.html#getContadores">getContadores</a></li><li><a href="global.html#getContenidoRoadmap">getContenidoRoadmap</a></li><li><a href="global.html#getEditores">getEditores</a></li><li><a href="global.html#getImgByAnio">getImgByAnio</a></li><li><a href="global.html#getRoadmap">getRoadmap</a></li><li><a href="global.html#getRuta">getRuta</a></li><li><a href="global.html#getSuscriptores">getSuscriptores</a></li><li><a href="global.html#isSuper">isSuper</a></li><li><a href="global.html#sendFiles">sendFiles</a></li></ul></div><div class="category"><h2>Pages</h2><h3>Global</h3><ul><li><a href="global.html#AboutUs">AboutUs</a></li><li><a href="global.html#Home">Home</a></li><li><a href="global.html#HowItWorks">HowItWorks</a></li><li><a href="global.html#News">News</a></li><li><a href="global.html#Newsletter">Newsletter</a></li><li><a href="global.html#Noticias">Noticias</a></li><li><a href="global.html#Technology">Technology</a></li></ul></div><div class="category"><h2>Pages - CRUD</h2><h3>Global</h3><ul><li><a href="global.html#Contador">Contador</a></li><li><a href="global.html#Creation">Creation</a></li><li><a href="global.html#Detail">Detail</a></li><li><a href="global.html#EditorRoadmap">EditorRoadmap</a></li><li><a href="global.html#HomeCrud">HomeCrud</a></li><li><a href="global.html#LoginPage">LoginPage</a></li><li><a href="global.html#Multimedia">Multimedia</a></li><li><a href="global.html#SignUpPage">SignUpPage</a></li></ul></div><div class="category"><h2>Sections</h2><h3>Global</h3><ul><li><a href="global.html#Applications">Applications</a></li><li><a href="global.html#ApplicationsDetail">ApplicationsDetail</a></li><li><a href="global.html#Carousel3D">Carousel3D</a></li><li><a href="global.html#CarouselNewsDetail">CarouselNewsDetail</a></li><li><a href="global.html#CarouselNoticia">CarouselNoticia</a></li><li><a href="global.html#CarouselTechnologySection">CarouselTechnologySection</a></li><li><a href="global.html#CarouselTemplate">CarouselTemplate</a></li><li><a href="global.html#CarouselWorks">CarouselWorks</a></li><li><a href="global.html#Connectivity">Connectivity</a></li><li><a href="global.html#Constellation">Constellation</a></li><li><a href="global.html#Contact">Contact</a></li><li><a href="global.html#CounterSection">CounterSection</a></li><li><a href="global.html#Desarrollo">Desarrollo</a></li><li><a href="global.html#FollowUs">FollowUs</a></li><li><a href="global.html#Footer">Footer</a></li><li><a href="global.html#FooterTemplate">FooterTemplate</a></li><li><a href="global.html#History">History</a></li><li><a href="global.html#Investors">Investors</a></li><li><a href="global.html#LastMission">LastMission</a></li><li><a href="global.html#ManagmentTeam">ManagmentTeam</a></li><li><a href="global.html#Missions">Missions</a></li><li><a href="global.html#Modelo3DSection">Modelo3DSection</a></li><li><a href="global.html#Partners">Partners</a></li><li><a href="global.html#SectionMundo">SectionMundo</a></li><li><a href="global.html#ServicesTech">ServicesTech</a></li><li><a href="global.html#Slider">Slider</a></li><li><a href="global.html#SocialMedia">SocialMedia</a></li><li><a href="global.html#Solution">Solution</a></li><li><a href="global.html#Welcome">Welcome</a></li><li><a href="global.html#Welcome2">Welcome2</a></li><li><a href="global.html#Welcome3">Welcome3</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>components/AnimacionMundo.js</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect, useRef } from 'react';
import '../styles/AnimacionMundo.css'
import * as THREE from 'three';
import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';
import modelPathEarth from '../models/earth.glb';
import modelPathSat from '../models/satelite.glb';

/**
 * @function AnimacionMundo
 * @desc Componente de Three.js para visualizar modelos 3D
 * @category Components
 * @returns {JSX.Element} Componente de visualización 3D
 */

const AnimacionMundo = ({cantSat}) => {
  let cantSats= 5;
  
  const mountRef = useRef(null);
  const [modelsLoaded, setModelsLoaded] = useState(false);
     
  useEffect(() => {
    // Declaración de variables utilizadas en el código
    let earthScene;
    let sateliteModel;
    const satelites = [];
    let axis2, axis3, axis4;

    const toRadian = (value) => {
      return value * Math.PI / 180;
    };

    // Crea un satélite clonando un modelo existente o creando una esfera si no hay modelo cargado
    function crearSatelite() {
      if (sateliteModel) {
        const satelite = sateliteModel.clone(); // Clona el modelo de satélite cargado
        satelite.scale.set(0.012, 0.012, 0.012); // Escala el satélite clonado
        return satelite;
      } else {
        const sateliteGeometry = new THREE.SphereGeometry(0.01, 8, 8); // Tamaño más pequeño para la esfera
        const sateliteMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
        const satelite = new THREE.Mesh(sateliteGeometry, sateliteMaterial);
        return satelite;
      }
    }

    // Configuración de Three.js
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(57.5, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, -0.25, 3);

    const renderer = new THREE.WebGLRenderer({ alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    mountRef.current.appendChild(renderer.domElement);

    const sphere1 = new THREE.Mesh(new THREE.SphereGeometry(0.5, 16, 16), new THREE.MeshToonMaterial({ color: 0x02489e }));
    sphere1.position.set(0, 0, 0);

    const sphere2 = new THREE.Mesh(new THREE.SphereGeometry(0.1, 16, 16), new THREE.MeshToonMaterial({ color: 0x433b46 }));
    sphere2.position.set(0, 0, 0);

    const sphere3 = new THREE.Mesh(new THREE.SphereGeometry(0.1, 16, 16), new THREE.MeshToonMaterial({ color: 0x433b46 }));
    sphere3.position.set(0, 0, 0);

    const sphere4 = new THREE.Mesh(new THREE.SphereGeometry(0.1, 16, 16), new THREE.MeshToonMaterial({ color: 0x433b46 }));
    sphere4.position.set(0, 0, 0);

    const light2 = new THREE.AmbientLight(0xffffff, 0.75);

    /* const controls = new OrbitControls(camera, renderer.domElement); */
    /* controls.update(); */

    const earthLoader = new GLTFLoader();
    const sateliteLoader = new GLTFLoader();

    Promise.all([
      new Promise((resolve, reject) => {
        earthLoader.load(modelPathEarth, function (gltf) {
          earthScene = gltf.scene;
          scene.add(earthScene);
          resolve();
        }, undefined, function (error) {
          reject(error);
          console.error(error);
        });
      }),
      new Promise((resolve, reject) => {
        sateliteLoader.load(modelPathSat, function (gltf) {
          sateliteModel = gltf.scene;
          setModelsLoaded(true);
          resolve();
        }, undefined, function (error) {
          reject(error);
          console.error(error);
        });
      })
    ]).then(() => {
      // Todos los modelos están cargados
      scene.add(sphere2, sphere3, sphere4, light2);
      crearNodos(cantSats);
      earthScene.rotation.y += toRadian(15);
      earthScene.rotation.z -= toRadian(5);
      earthScene.rotation.x -= toRadian(4);
      animate();
      renderer.render(scene, camera);
    }).catch((error) => {
      console.error('Error loading models:', error);
    });

    // Calcula la cantidad de satélites por cada nodo y posiciona los nodos
    function crearNodos(count) {
      var satelitesPorEsfera = Math.floor(count / 3);
      var remainder = count % 3;

      var longitud2 = -70;
      var longitud3 = -90;
      var longitud4 = 60;

      agregarSatelites(satelitesPorEsfera, 0, toRadian(longitud2), sphere2);
      axis2 = new THREE.Vector3(Math.sin(toRadian(longitud2)), 0, -Math.cos(toRadian(longitud2)));
      axis2.normalize();

      agregarSatelites(satelitesPorEsfera, 10, toRadian(longitud3), sphere3);
      axis3 = new THREE.Vector3(Math.sin(toRadian(longitud3)), 0, -Math.cos(toRadian(longitud3)));
      axis3.normalize();

      agregarSatelites(satelitesPorEsfera + remainder, 20, toRadian(longitud4), sphere4);
      axis4 = new THREE.Vector3(Math.sin(toRadian(longitud4)), 0, -Math.cos(toRadian(longitud4)));
      axis4.normalize();
    }

    // Agrega los satélites a sus respectivos nodos
    function agregarSatelites(count, angleLatitud, angleLongitud, esferaNodo) {
      var radius = 1.2; // Radio de los nodos

      for (let i = 0; i &lt; count; i++) {
        const satelite = crearSatelite();
        satelites.push(satelite);
        esferaNodo.add(satelite);
        posicionSatelite(satelite, radius, (2 * Math.PI * i) / count + angleLatitud, angleLongitud);

        // Calcular la dirección hacia la Tierra desde el satélite
        const directionToEarth = new THREE.Vector3().subVectors(sphere1.position, satelite.position);
        // Alinear el satélite para que su cara inferior mire hacia la Tierra
        satelite.lookAt(satelite.position.clone().add(directionToEarth));
        // Rotar el satélite 180 grados alrededor del eje Y para ajustar la orientación
        satelite.rotation.y += Math.PI;
      }
    }

    // Setea y actualiza la posición del satélite
    function posicionSatelite(satelite, radius, angleLatitud, angleLongitud) {
      satelite.position.x = sphere1.position.x + radius * Math.cos(angleLongitud) * Math.cos(angleLatitud);
      satelite.position.y = sphere1.position.y + radius * Math.sin(angleLatitud);
      satelite.position.z = sphere1.position.z + radius * Math.sin(angleLongitud) * Math.cos(angleLatitud);
    }

    // Animación principal
    function animate() {
      requestAnimationFrame(animate);
      
      earthScene.rotation.y += toRadian(0.075);
      sphere2.rotateOnAxis(axis2, toRadian(-0.4));
      sphere3.rotateOnAxis(axis3, toRadian(-0.4));
      sphere4.rotateOnAxis(axis4, toRadian(-0.4));

      renderer.render(scene, camera);

      return;
    }
  }, []); // El arreglo de dependencias vacío asegura que el efecto se ejecute solo una vez

  return &lt;div ref={mountRef} className='CanvasContainer'/>;
};

export default AnimacionMundo;</code></pre>
        </article>
    </section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>


</body>
</html>
